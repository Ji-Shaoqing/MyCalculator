# Qtè®¡ç®—å™¨é¡¹ç›®å®Œæ•´æŠ€æœ¯æ–‡æ¡£

## ğŸ“– æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£ä¸ºã€ŠåŸºäºQtæ¡†æ¶çš„ç®€æ˜“è®¡ç®—å™¨ã€‹é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–‡æ¡£ï¼Œæ—¨åœ¨å¸®åŠ©æ–°å¼€å‘è€…å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ã€æŒæ¡ä»£ç ç»“æ„ï¼Œå¹¶èƒ½å¤Ÿé¡ºåˆ©è¿›è¡ŒåŠŸèƒ½æ‰©å±•å’Œç»´æŠ¤ã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„æ€»è§ˆ

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Application                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MainWindow â”‚  â”‚ DisplayPanel â”‚  â”‚    Button Grid     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Business Logic                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  CalculatorEngine                   â”‚   â”‚
â”‚  â”‚       è¿ç®—é€»è¾‘ - çŠ¶æ€ç®¡ç† - é”™è¯¯å¤„ç† - è¾“å…¥éªŒè¯        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       Data Access                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  SettingsManager                    â”‚   â”‚
â”‚  â”‚      ç”¨æˆ·é…ç½® - çª—å£çŠ¶æ€ - æ ·å¼åå¥½ - æŒä¹…åŒ–å­˜å‚¨       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Infrastructure                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CalcTypes  â”‚  â”‚  Constants  â”‚  â”‚  Resource Manager  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡¹ç›®æ¶æ„ç±»å›¾

```mermaid
classDiagram
    direction TB
  
    class CalculatorEngine {
        -CalculatorState m_state
        -QString m_currentInput
        -bool m_hasDecimal
        +getState() CalculatorState
        +getDisplayText() QString
        +hasError() bool
        +inputDigit(int digit)
        +inputOperator(Operator op)
        +inputEquals()
        +inputDecimal()
        +clearEntry()
        +clearAll()
        +backspace()
        +changeSign()
        +displayChanged(QString displayText)$
        +errorOccurred(ErrorType errorType)$
        +stateUpdated(CalculatorState state)$
    }

    class CalculatorState {
        -double currentValue
        -double storedValue
        -Operator pendingOperator
        -bool waitingForOperand
        -ErrorType error
        +CalculatorState()
    }

    class MainWindow {
        -QWidget* m_centralWidget
        -QLineEdit* m_displayPanel
        -CalculatorEngine* m_engine
        -QMap~QString, QPushButton*~ m_buttons
        +keyPressEvent(QKeyEvent* event)
        +closeEvent(QCloseEvent* event)
        +onDigitClicked()
        +onOperatorClicked()
        +onFunctionClicked()
        +onEqualsClicked()
        +onDecimalClicked()
        +onDisplayChanged()
        +onErrorOccurred()
        +onEngineStateUpdated()
        +setupUI()
        +setupConnections()
        +loadStyleSheet()
        +saveWindowState()
        +restoreWindowState()
        +setupButtonStyles()
    }

    class SettingsManager {
        -QSettings m_settings
        +instance() SettingsManager$
        +getStylePreference() QString
        +setStylePreference(QString style)
        +getWindowGeometry() QByteArray
        +setWindowGeometry(QByteArray geometry)
        +getSoundEnabled() bool
        +setSoundEnabled(bool enabled)
        +themeChanged(QString theme)$
    }

    class CalculationTypes {
        <<enumeration>>
        Operator
        ErrorType
        ButtonType
    }

    class Constants {
        <<final>>
        -MAX_DISPLAY_LENGTH int
        -DISPLAY_FONT_SIZE int
        -BUTTON_FONT_SIZE int
        -MAX_CALCULATION_VALUE double
        -MIN_CALCULATION_VALUE double
        -WINDOW_WIDTH int
        -WINDOW_HEIGHT int
        -BUTTON_WIDTH int
        -BUTTON_HEIGHT int
        -LAYOUT_SPACING int
        -LAYOUT_MARGIN int
        -DEFAULT_STYLE QString
        -DARK_STYLE QString
    }

    class NumPadButton {
        -ButtonType m_buttonType
        -bool m_isPressed
        -bool m_isHovered
        -int m_shortcutKey
        +buttonType() ButtonType
        +setButtonType(ButtonType type)
        +setShortcutKey(int key)
        +paintEvent(QPaintEvent* event)
        +mousePressEvent(QMouseEvent* event)
        +mouseReleaseEvent(QMouseEvent* event)
        +enterEvent(QEvent* event)
        +leaveEvent(QEvent* event)
        +buttonTypeChanged(ButtonType type)$
    }

    class DisplayPanel {
        -bool m_errorState
        +errorState() bool
        +setErrorState(bool error)
        +updateDisplay(QString text)
        +clearDisplay()
        +errorStateChanged(bool errorState)$
        +paintEvent(QPaintEvent* event)
        +keyPressEvent(QKeyEvent* event)
    }
  
    MainWindow --> CalculatorEngine : ç»„åˆ
    MainWindow ..> SettingsManager : ä¾èµ–
    MainWindow --> DisplayPanel : ç»„åˆ
    MainWindow --> NumPadButton : ç»„åˆ
    CalculatorEngine --> CalculatorState : ç»„åˆ
    CalculatorEngine ..> CalculationTypes : ä¾èµ–
    SettingsManager ..> Constants : ä¾èµ–
    CalculatorEngine ..> MainWindow : ä¿¡å·
    CalculatorEngine ..> DisplayPanel : ä¿¡å·
```

## ğŸ“ è¯¦ç»†æ–‡ä»¶ç»“æ„

### æºä»£ç ç»„ç»‡

```
Calculator/
â”‚
â”œâ”€â”€ inc/                            # å¤´æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ CalculationTypes.h      # å®šä¹‰è®¡ç®—ç›¸å…³ç±»å‹ï¼ˆå¦‚æ“ä½œç¬¦ã€çŠ¶æ€ç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ CalculatorEngine.h      # è®¡ç®—é€»è¾‘æ ¸å¿ƒç±»
â”‚   â”œâ”€â”€ ui/  
â”‚   â”‚   â”œâ”€â”€ DisplayPanel.h          # æ˜¾ç¤ºé¢æ¿ç±»
â”‚   â”‚   â”œâ”€â”€ MainWindow.h            # ä¸»çª—å£ç±»
â”‚   â”‚   â””â”€â”€ NumPadButton.h          # æ•°å­—æŒ‰é’®ç±»
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ Constants.h             # å¸¸é‡å®šä¹‰ï¼ˆå¦‚æŒ‰é’®æ–‡æœ¬ã€æ ·å¼è·¯å¾„ç­‰ï¼‰
â”‚       â””â”€â”€ SettingsManager.h       # è®¾ç½®ç®¡ç†ç±»ï¼ˆä¸»é¢˜ã€é…ç½®ç­‰ï¼‰
â”‚
â”œâ”€â”€ src/                    # æºæ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ CalculatorEngine.cpp    # è®¡ç®—é€»è¾‘å®ç°
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ DisplayPanel.cpp        # æ˜¾ç¤ºé¢æ¿å®ç°
â”‚   â”‚   â”œâ”€â”€ MainWindow.cpp          # ä¸»çª—å£å®ç°
â”‚   â”‚   â””â”€â”€ NumPadButton.cpp        # æ•°å­—æŒ‰é’®å®ç°
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ Constants.cpp           # å¸¸é‡å®ç°
â”‚   â”‚   â””â”€â”€ SettingsManager.cpp     # è®¾ç½®ç®¡ç†å®ç°
â”‚   â””â”€â”€ main.cpp                    # ç¨‹åºå…¥å£
â”‚
â”œâ”€â”€ styles/                         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ dark.qss                    # æ·±è‰²ä¸»é¢˜æ ·å¼
â”‚   â””â”€â”€ default.qss                 # é»˜è®¤ä¸»é¢˜æ ·å¼
â”‚
â”œâ”€â”€ Calculator.pro                  # Qt é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ Calculator.pro.user             # Qt Creator ç”¨æˆ·é…ç½®ï¼ˆå¯å¿½ç•¥ï¼‰
â””â”€â”€ Calculator.qrc                  # Qt èµ„æºæ–‡ä»¶ï¼ˆå›¾æ ‡ã€æ ·å¼ç­‰ï¼‰
```

## ğŸ“‹ æ ¸å¿ƒç±»è¯¦ç»†è¯´æ˜

### 1. CalculatorEngineï¼ˆè®¡ç®—å¼•æ“ï¼‰

**èŒè´£**ï¼šæ ¸å¿ƒè®¡ç®—é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†

| æ–¹æ³•                 | å‚æ•°            | è¿”å›å€¼              | è¯´æ˜             |
| -------------------- | --------------- | ------------------- | ---------------- |
| `getState()`       | -               | `CalculatorState` | è·å–å½“å‰çŠ¶æ€     |
| `getDisplayText()` | -               | `QString`         | è·å–æ˜¾ç¤ºæ–‡æœ¬     |
| `hasError()`       | -               | `bool`            | æ£€æŸ¥é”™è¯¯çŠ¶æ€     |
| `inputDigit()`     | `int digit`   | `void`            | å¤„ç†æ•°å­—è¾“å…¥     |
| `inputOperator()`  | `Operator op` | `void`            | å¤„ç†è¿ç®—ç¬¦è¾“å…¥   |
| `inputEquals()`    | -               | `void`            | æ‰§è¡Œç­‰å·è¿ç®—     |
| `inputDecimal()`   | -               | `void`            | å¤„ç†å°æ•°ç‚¹è¾“å…¥   |
| `clearEntry()`     | -               | `void`            | æ¸…é™¤å½“å‰è¾“å…¥(CE) |
| `clearAll()`       | -               | `void`            | å…¨éƒ¨æ¸…é™¤(C)      |
| `backspace()`      | -               | `void`            | é€€æ ¼åˆ é™¤         |
| `changeSign()`     | -               | `void`            | æ­£è´Ÿå·åˆ‡æ¢       |

**å…³é”®çŠ¶æ€å˜é‡**ï¼š

- `m_state`: å½“å‰è®¡ç®—çŠ¶æ€
- `m_currentInput`: ç”¨æˆ·è¾“å…¥ç¼“å†²
- `m_hasDecimal`: å°æ•°ç‚¹æ ‡è®°

### 2. MainWindowï¼ˆä¸»çª—å£ï¼‰

**èŒè´£**ï¼šç”¨æˆ·ç•Œé¢ç®¡ç†å’Œäº‹ä»¶å¤„ç†

| æ–¹æ³•                   | è¯´æ˜             |
| ---------------------- | ---------------- |
| `setupUI()`          | åˆå§‹åŒ–ç•Œé¢å¸ƒå±€   |
| `setupConnections()` | å»ºç«‹ä¿¡å·æ§½è¿æ¥   |
| `loadStyleSheet()`   | åŠ è½½æ ·å¼ä¸»é¢˜     |
| `onXXXClicked()`ç³»åˆ— | æŒ‰é’®ç‚¹å‡»äº‹ä»¶å¤„ç† |
| `keyPressEvent()`    | é”®ç›˜äº‹ä»¶å¤„ç†     |
| `closeEvent()`       | çª—å£å…³é—­äº‹ä»¶     |

**ç•Œé¢ç»„ä»¶**ï¼š

- `m_centralWidget`: ä¸­å¤®çª—å£éƒ¨ä»¶
- `m_displayPanel`: è®¡ç®—ç»“æœæ˜¾ç¤ºé¢æ¿
- `m_engine`: è®¡ç®—å™¨å¼•æ“
- `m_buttons`: æŒ‰é’®æ˜ å°„è¡¨

### 3. SettingsManagerï¼ˆè®¾ç½®ç®¡ç†ï¼‰

**èŒè´£**ï¼šåº”ç”¨ç¨‹åºé…ç½®æŒä¹…åŒ–

| æ–¹æ³•                         | è¯´æ˜         |
| ---------------------------- | ------------ |
| `instance()`               | è·å–å•ä¾‹å®ä¾‹ |
| `get/setStylePreference()` | æ ·å¼åå¥½è®¾ç½® |
| `get/setWindowGeometry()`  | çª—å£çŠ¶æ€è®¾ç½® |
| `get/setSoundEnabled()`    | å£°éŸ³è®¾ç½®     |
| `getAvailableThemes()`     | å¯ç”¨ä¸»é¢˜åˆ—è¡¨ |
| `get/setLanguage()`        | å¯ç”¨è¯­è¨€åˆ—è¡¨ |

**é…ç½®å­˜å‚¨**ï¼š

- Windows: ç³»ç»Ÿæ³¨å†Œè¡¨
- macOS: Property Listæ–‡ä»¶
- Linux: ~/.config/ ç›®å½•

### 4. æ•°æ®ç±»å‹å®šä¹‰

**Operatorï¼ˆè¿ç®—ç¬¦æšä¸¾ï¼‰**ï¼š

```cpp
enum class Operator {
    None,       // æ— æ“ä½œ
    Add,        // åŠ æ³• +
    Subtract,   // å‡æ³• -
    Multiply,   // ä¹˜æ³• Ã—  
    Divide,     // é™¤æ³• Ã·
    Equals      // ç­‰å· =
};
```

**ErrorTypeï¼ˆé”™è¯¯ç±»å‹æšä¸¾ï¼‰**ï¼š

```cpp
enum class ErrorType {
    NoError,          // æ— é”™è¯¯
    DivisionByZero,   // é™¤é›¶é”™è¯¯
    Overflow,         // æº¢å‡ºé”™è¯¯
    InvalidInput,     // æ— æ•ˆè¾“å…¥
    SyntaxError       // è¯­æ³•é”™è¯¯
};
```

## ğŸ”„ æ ¸å¿ƒåŠŸèƒ½æµç¨‹

### 1. æ•°å­—è¾“å…¥æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»æ•°å­—æŒ‰é’® 
    â†’ MainWindow::onDigitClicked()
    â†’ CalculatorEngine::inputDigit()
    â†’ æ›´æ–° m_currentInput
    â†’ emit displayChanged()
    â†’ MainWindow æ›´æ–°æ˜¾ç¤º
```

### 2. è¿ç®—æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»è¿ç®—ç¬¦
    â†’ MainWindow::onOperatorClicked() 
    â†’ CalculatorEngine::inputOperator()
    â†’ å¦‚æœ‰å¾…å¤„ç†è¿ç®—åˆ™ calculate()
    â†’ ä¿å­˜è¿ç®—ç¬¦å’Œå½“å‰å€¼
    â†’ ç­‰å¾…æ–°æ“ä½œæ•°è¾“å…¥
```

### 3. ç­‰å·è®¡ç®—æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»ç­‰å·
    â†’ MainWindow::onEqualsClicked()
    â†’ CalculatorEngine::inputEquals() 
    â†’ calculate() æ‰§è¡Œè¿ç®—
    â†’ æ›´æ–°è®¡ç®—ç»“æœ
    â†’ emit displayChanged()
    â†’ é‡ç½®è¿ç®—ç¬¦çŠ¶æ€
```

### 4. ä¸»é¢˜åˆ‡æ¢æµç¨‹

```
ç”¨æˆ·åˆ‡æ¢ä¸»é¢˜
    â†’ MainWindow::switchToTheme()
    â†’ SettingsManager::setStylePreference()
    â†’ emit themeChanged()
    â†’ MainWindow::loadStyleSheet()
    â†’ é‡æ–°åŠ è½½QSSæ ·å¼è¡¨
```

## ğŸ¨ ç•Œé¢å¸ƒå±€è§„èŒƒ

### æŒ‰é’®ç½‘æ ¼å¸ƒå±€ï¼ˆ5Ã—4ï¼‰

```
è¡Œ0: [ CE ] [ C ] [âŒ« ] [ Ã· ]
è¡Œ1: [ 7 ]  [ 8 ] [ 9 ] [ Ã— ]
è¡Œ2: [ 4 ]  [ 5 ] [ 6 ] [ - ]
è¡Œ3: [ 1 ]  [ 2 ] [ 3 ] [ + ]
è¡Œ4: [     0    ] [ . ] [ = ]
```

### æ ·å¼åˆ†ç±»

| æŒ‰é’®ç±»å‹ | æ ·å¼ç±»       | é»˜è®¤é¢œè‰² | åŠŸèƒ½           |
| -------- | ------------ | -------- | -------------- |
| æ•°å­—æŒ‰é’® | `number`   | #f8f9fa  | 0-9æ•°å­—è¾“å…¥    |
| è¿ç®—ç¬¦   | `operator` | #007bff  | + - Ã— Ã· è¿ç®— |
| ç­‰å·     | `equals`   | #28a745  | æ‰§è¡Œè®¡ç®—       |
| åŠŸèƒ½æŒ‰é’® | `function` | #6c757d  | CE C âŒ« åŠŸèƒ½   |

## âŒ¨ï¸ é”®ç›˜å¿«æ·é”®æ˜ å°„

| æŒ‰é”®                         | åŠŸèƒ½     | å¯¹åº”æŒ‰é’®  |
| ---------------------------- | -------- | --------- |
| `0-9`                      | æ•°å­—è¾“å…¥ | æ•°å­—æŒ‰é’®  |
| `+ - * /`                  | è¿ç®—ç¬¦   | + - Ã— Ã· |
| `Enter`, `Return`, `=` | ç­‰å·     | =         |
| `.`                        | å°æ•°ç‚¹   | .         |
| `Backspace`                | é€€æ ¼     | âŒ«        |
| `Escape`                   | å…¨éƒ¨æ¸…é™¤ | C         |

## ğŸ› ï¸ å¼€å‘æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°è¿ç®—ç¬¦ï¼ˆä»¥å¹³æ–¹æ ¹ä¸ºä¾‹ï¼‰

**æ­¥éª¤1ï¼šæ‰©å±•æšä¸¾**

```cpp
// calculationtypes.h
enum class Operator {
    // ... ç°æœ‰è¿ç®—ç¬¦
    SquareRoot  // æ–°å¢å¹³æ–¹æ ¹
};
```

**æ­¥éª¤2ï¼šå®ç°è¿ç®—é€»è¾‘**

```cpp
// calculatorengine.cpp
void CalculatorEngine::inputOperator(Operator op) {
    case Operator::SquareRoot:
        if (m_state.currentValue >= 0) {
            m_state.currentValue = sqrt(m_state.currentValue);
        } else {
            setError(ErrorType::InvalidInput);
        }
        break;
}
```

**æ­¥éª¤3ï¼šæ·»åŠ ç•Œé¢æ”¯æŒ**

```cpp
// mainwindow.cpp - setupUI()
m_buttons["sqrt"] = new QPushButton("âˆš");

// mainwindow.cpp - setupConnections()  
connect(m_buttons["sqrt"], &QPushButton::clicked,
        [this](){ m_engine->inputOperator(Operator::SquareRoot); });
```

### æ·»åŠ è®¡ç®—å†å²åŠŸèƒ½

**æ­¥éª¤1ï¼šåˆ›å»ºå†å²è®°å½•ç±»**

```cpp
class CalculationHistory {
private:
    QList<QPair<QString, double>> m_history;
public:
    void addEntry(const QString& expression, double result);
    QList<QString> getHistory() const;
};
```

**æ­¥éª¤2ï¼šé›†æˆåˆ°ä¸»çª—å£**

```cpp
// mainwindow.h
class MainWindow {
private:
    CalculationHistory* m_history;
    QListWidget* m_historyList;
};
```

## ğŸ“Š æ€§èƒ½å’Œå®‰å…¨è€ƒè™‘

### æ€§èƒ½ä¼˜åŒ–

- **è¾“å…¥éªŒè¯**: æ‰€æœ‰æ•°å­—è¾“å…¥éƒ½ç»è¿‡èŒƒå›´æ£€æŸ¥
- **å†…å­˜ç®¡ç†**: ä½¿ç”¨Qtçˆ¶å­å¯¹è±¡æœºåˆ¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜
- **ä¿¡å·ä¼˜åŒ–**: é¿å…ä¸å¿…è¦çš„ä¿¡å·å‘å°„

### é”™è¯¯å¤„ç†

- **é™¤é›¶æ£€æŸ¥**: é™¤æ³•è¿ç®—å‰æ£€æŸ¥é™¤æ•°
- **æº¢å‡ºæ£€æµ‹**: æ£€æŸ¥è®¡ç®—ç»“æœæ˜¯å¦è¶…å‡ºèŒƒå›´
- **è¾“å…¥éªŒè¯**: é˜²æ­¢æ— æ•ˆå­—ç¬¦è¾“å…¥

### ç”¨æˆ·ä½“éªŒ

- **å³æ—¶åé¦ˆ**: æ‰€æœ‰æ“ä½œéƒ½æœ‰è§†è§‰åé¦ˆ
- **çŠ¶æ€æŒä¹…åŒ–**: è®°ä½ç”¨æˆ·åå¥½è®¾ç½®
- **é”®ç›˜æ”¯æŒ**: å®Œæ•´çš„å¿«æ·é”®æ”¯æŒ

---

è¿™ä»½æ–‡æ¡£æä¾›äº†é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯è§†å›¾ï¼Œå¯ä»¥ä½œä¸ºæ–°å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹çš„å‚è€ƒèµ„æ–™ï¼Œä¹Ÿä¾¿äºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œç»´æŠ¤å·¥ä½œã€‚
